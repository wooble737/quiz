import{f as W,a as Q,c as be}from"../chunks/DXEngK6a.js";import"../chunks/BqSQbZxX.js";import{v as $,z as Ie,y as Me,g as l,a2 as Ne,A as De,H as Re,B as he,C as ge,D as ne,R as ee,a3 as He,a4 as Qe,Q as _e,T as Fe,w as ae,a5 as ke,a6 as Te,P as ze,m as U,a7 as xe,a8 as Be,K as qe,O as Le,a9 as Ve,aa as ie,M as Ee,ab as Pe,ac as Ye,ad as Je,ae as Ke,af as Ue,ag as We,$ as Xe,l as Ge,ah as Ze,V as $e,ai as je,aj as er,x as rr,t as K,c as x,s as g,ak as tr,r as y,al as se,n as ar,a as T,a1 as le,am as or}from"../chunks/BsrcbJGS.js";import{s as ue}from"../chunks/1J8kevT7.js";import{i as te}from"../chunks/DQsbSWEf.js";import{r as ye,s as nr}from"../chunks/C6ojX3s0.js";import{e as de}from"../chunks/DyFJ2-eY.js";import{b as ve}from"../chunks/Cr5OOY_w.js";import{p as ir}from"../chunks/D4Caz1gY.js";function we(r,t){return t}function sr(r,t,e){for(var a=r.items,i=[],s=t.length,u=0;u<s;u++)Ke(t[u].e,i,!0);var c=s>0&&i.length===0&&e!==null;if(c){var m=e.parentNode;Ue(m),m.append(e),a.clear(),D(r,t[0].prev,t[s-1].next)}We(i,()=>{for(var S=0;S<s;S++){var p=t[S];c||(a.delete(p.k),D(r,p.prev,p.next)),Ee(p.e,!c)}})}function Ae(r,t,e,a,i,s=null){var u=r,c={flags:t,items:new Map,first:null};$&&Ie();var m=null,S=!1,p=new Map,R=Ne(()=>{var o=e();return Te(o)?o:o==null?[]:ke(o)}),n,b;function d(){lr(b,n,c,p,u,i,t,a,e),s!==null&&(n.length===0?m?qe(m):m=_e(()=>s(u)):m!==null&&Le(m,()=>{m=null}))}Me(()=>{b??=Xe,n=l(R);var o=n.length;if(S&&o===0)return;S=o===0;let h=!1;if($){var M=De(u)===Re;M!==(o===0)&&(u=he(),ge(u),ne(!1),h=!0)}if($){for(var w=null,v,f=0;f<o;f++){if(ee.nodeType===He&&ee.data===Qe){u=ee,h=!0,ne(!1);break}var A=n[f],q=a(A,f);v=me(ee,c,w,null,A,q,f,i,t,e),c.items.set(q,v),w=v}o>0&&ge(he())}if($)o===0&&s&&(m=_e(()=>s(u)));else if(Fe()){var F=new Set,O=ae;for(f=0;f<o;f+=1){A=n[f],q=a(A,f);var E=c.items.get(q)??p.get(q);E?Se(E,A,f):(v=me(null,c,null,null,A,q,f,i,t,e,!0),p.set(q,v)),F.add(q)}for(const[X,L]of c.items)F.has(X)||O.skipped_effects.add(L.e);O.oncommit(d)}else d();h&&ne(!0),l(R)}),$&&(u=ee)}function lr(r,t,e,a,i,s,u,c,m){var S=t.length,p=e.items,R=e.first,n=R,b,d=null,o=[],h=[],M,w,v,f;for(f=0;f<S;f+=1){if(M=t[f],w=c(M,f),v=p.get(w),v===void 0){var A=a.get(w);if(A!==void 0){a.delete(w),p.set(w,A);var q=d?d.next:n;D(e,d,A),D(e,A,q),fe(A,q,i),d=A}else{var F=n?n.e.nodes_start:i;d=me(F,e,d,d===null?e.first:d.next,M,w,f,s,u,m)}p.set(w,d),o=[],h=[],n=d.next;continue}if(Se(v,M,f),(v.e.f&ie)!==0&&qe(v.e),v!==n){if(b!==void 0&&b.has(v)){if(o.length<h.length){var O=h[0],E;d=O.prev;var X=o[0],L=o[o.length-1];for(E=0;E<o.length;E+=1)fe(o[E],O,i);for(E=0;E<h.length;E+=1)b.delete(h[E]);D(e,X.prev,L.next),D(e,d,X),D(e,L,O),n=O,d=L,f-=1,o=[],h=[]}else b.delete(v),fe(v,n,i),D(e,v.prev,v.next),D(e,v,d===null?e.first:d.next),D(e,d,v),d=v;continue}for(o=[],h=[];n!==null&&n.k!==w;)(n.e.f&ie)===0&&(b??=new Set).add(n),h.push(n),n=n.next;if(n===null)continue;v=n}o.push(v),d=v,n=v.next}if(n!==null||b!==void 0){for(var _=b===void 0?[]:ke(b);n!==null;)(n.e.f&ie)===0&&_.push(n),n=n.next;var k=_.length;if(k>0){var C=null;sr(e,_,C)}}r.first=e.first&&e.first.e,r.last=d&&d.e;for(var z of a.values())Ee(z.e);a.clear()}function Se(r,t,e,a){Be(r.v,t),r.i=e}function me(r,t,e,a,i,s,u,c,m,S,p){var R=(m&Pe)!==0,n=(m&Ye)===0,b=R?n?U(i,!1,!1):xe(i):i,d=(m&Ve)===0?u:xe(u),o={i:d,v:b,k:s,a:null,e:null,prev:e,next:a};try{if(r===null){var h=document.createDocumentFragment();h.append(r=ze())}return o.e=_e(()=>c(r,b,d,S),$),o.e.prev=e&&e.e,o.e.next=a&&a.e,e===null?p||(t.first=o):(e.next=o,e.e.next=o.e),a!==null&&(a.prev=o,a.e.prev=o.e),o}finally{}}function fe(r,t,e){for(var a=r.next?r.next.e.nodes_start:e,i=t?t.e.nodes_start:e,s=r.e.nodes_start;s!==null&&s!==a;){var u=Je(s);i.before(s),s=u}}function D(r,t,e){t===null?r.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Ce(r,t,e=!1){if(r.multiple){if(t==null)return;if(!Te(t))return je();for(var a of r.options)a.selected=t.includes(re(a));return}for(a of r.options){var i=re(a);if(er(i,t)){a.selected=!0;return}}(!e||t!==void 0)&&(r.selectedIndex=-1)}function ur(r){var t=new MutationObserver(()=>{Ce(r,r.__value)});t.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),$e(()=>{t.disconnect()})}function ce(r,t,e=t){var a=new WeakSet,i=!0;Ge(r,"change",s=>{var u=s?"[selected]":":checked",c;if(r.multiple)c=[].map.call(r.querySelectorAll(u),re);else{var m=r.querySelector(u)??r.querySelector("option:not([disabled])");c=m&&re(m)}e(c),ae!==null&&a.add(ae)}),Ze(()=>{var s=t();if(r===document.activeElement){var u=rr??ae;if(a.has(u))return}if(Ce(r,s,i),i&&s===void 0){var c=r.querySelector(":checked");c!==null&&(s=re(c),e(s))}r.__value=s,i=!1}),ur(r)}function re(r){return"__value"in r?r.__value:r.value}var dr=W('<div class="flex items-center space-x-2 mb-2"><input type="text" class="flex-1 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"/> <button type="button" class="text-red-600 hover:text-red-800">Remove</button></div>'),vr=W("<option> </option>"),fr=W('<div><label class="block text-sm font-medium text-gray-700 mb-2">Options</label> <!> <button type="button" class="mt-2 text-indigo-600 hover:text-indigo-500">+ Add Option</button></div> <div><label for="correctAnswer" class="block text-sm font-medium text-gray-700">Correct Answer</label> <select id="correctAnswer" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"><option>Select correct answer</option><!></select></div>',1),cr=W('<div><label for="correctAnswer" class="block text-sm font-medium text-gray-700">Correct Answer</label> <select id="correctAnswer" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"><option>True</option><option>False</option></select></div>'),_r=W('<div><label for="correctAnswer" class="block text-sm font-medium text-gray-700">Correct Answer</label> <input type="text" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="Enter the correct answer"/></div>'),mr=W('<div class="text-red-600 text-center mt-4"> </div>'),pr=W('<div class="min-h-screen bg-gray-50 py-8"><div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-md"><h1 class="text-3xl font-bold text-gray-900 mb-6">Create a Question</h1> <form class="space-y-6"><div><label for="question" class="block text-sm font-medium text-gray-700">Question</label> <textarea id="question" required rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="Enter your question here"></textarea></div> <div><label for="questionType" class="block text-sm font-medium text-gray-700">Question Type</label> <select id="questionType" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"><option>Multiple Choice</option><option>True/False</option><option>Short Answer</option></select></div> <!> <div><button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"> </button></div> <!></form> <div class="mt-6"><a href="/" class="text-indigo-600 hover:text-indigo-500">Back to Home</a></div></div></div>');function qr(r){let t=U(""),e=U("multiple-choice"),a=U(["","","",""]),i=U(""),s=U(""),u=U(!1);function c(){T(a,[...l(a),""])}function m(_){T(a,l(a).filter((k,C)=>C!==_))}async function S(){T(u,!0),T(s,"");try{const _=localStorage.getItem("access_token"),k=await fetch("http://localhost:8000/api/questions/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify({quiz:quizId,question_text:l(t),question_type:l(e),options:l(e)==="multiple-choice"?l(a).filter(z=>z.trim()):null,correct_answer:l(i)})}),C=await k.json();k.ok?(alert("Question saved successfully!"),T(t,""),T(a,["","","",""]),T(i,"")):T(s,"Failed to save question")}catch{T(s,"Network error")}T(u,!1)}var p=pr(),R=x(p),n=g(x(R),2),b=x(n),d=g(x(b),2);tr(d),y(b);var o=g(b,2),h=g(x(o),2);K(()=>{l(e),se(()=>{})});var M=x(h);M.value=M.__value="multiple-choice";var w=g(M);w.value=w.__value="true-false";var v=g(w);v.value=v.__value="short-answer",y(h),y(o);var f=g(o,2);{var A=_=>{var k=fr(),C=le(k),z=g(x(C),2);Ae(z,1,()=>l(a),we,(B,P,Y)=>{var j=dr(),G=x(j);ye(G),nr(G,"placeholder",`Option ${Y+1}`);var Z=g(G,2);y(j),K(()=>Z.disabled=l(a).length<=2),ve(G,()=>l(a)[Y],J=>or(a,l(a)[Y]=J)),de("click",Z,()=>m(Y)),Q(B,j)});var oe=g(z,2);y(C);var H=g(C,2),I=g(x(H),2);K(()=>{l(i),se(()=>{l(a)})});var N=x(I);N.value=N.__value="";var V=g(N);Ae(V,1,()=>l(a),we,(B,P)=>{var Y=be(),j=le(Y);{var G=Z=>{var J=vr(),Oe=x(J,!0);y(J);var pe={};K(()=>{ue(Oe,l(P)),pe!==(pe=l(P))&&(J.value=(J.__value=l(P))??"")}),Q(Z,J)};te(j,Z=>{l(P).trim()&&Z(G)})}Q(B,Y)}),y(I),y(H),de("click",oe,c),ce(I,()=>l(i),B=>T(i,B)),Q(_,k)},q=_=>{var k=be(),C=le(k);{var z=H=>{var I=cr(),N=g(x(I),2);K(()=>{l(i),se(()=>{})});var V=x(N);V.value=V.__value="true";var B=g(V);B.value=B.__value="false",y(N),y(I),ce(N,()=>l(i),P=>T(i,P)),Q(H,I)},oe=H=>{var I=_r(),N=g(x(I),2);ye(N),y(I),ve(N,()=>l(i),V=>T(i,V)),Q(H,I)};te(C,H=>{l(e)==="true-false"?H(z):H(oe,!1)},!0)}Q(_,k)};te(f,_=>{l(e)==="multiple-choice"?_(A):_(q,!1)})}var F=g(f,2),O=x(F),E=x(O,!0);y(O),y(F);var X=g(F,2);{var L=_=>{var k=mr(),C=x(k,!0);y(k),K(()=>ue(C,l(s))),Q(_,k)};te(X,_=>{l(s)&&_(L)})}y(n),ar(2),y(R),y(p),K(()=>{O.disabled=l(u),ue(E,l(u)?"Saving...":"Save Question")}),ve(d,()=>l(t),_=>T(t,_)),ce(h,()=>l(e),_=>T(e,_)),de("submit",n,ir(S)),Q(r,p)}export{qr as component};
